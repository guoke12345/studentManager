<!DOCTYPE html>
<html lang="en">
<head>
<base href="${contextPath}/" />
    <meta charset="utf-8">
    <title>国际学院学生数据管理</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Charisma, a fully featured, responsive, HTML5, Bootstrap admin template.">
    <meta name="author" content="Muhammad Usman">

    <!-- The styles -->
    <link id="bs-css" href="css/bootstrap-cerulean.min.css" rel="stylesheet">

    <link href="css/charisma-app.css" rel="stylesheet">
    <link href='bower_components/fullcalendar/dist/fullcalendar.css' rel='stylesheet'>
    <link href='bower_components/fullcalendar/dist/fullcalendar.print.css' rel='stylesheet' media='print'>
    <link href='bower_components/chosen/chosen.min.css' rel='stylesheet'>
    <link href='bower_components/colorbox/example3/colorbox.css' rel='stylesheet'>
    <link href='bower_components/responsive-tables/responsive-tables.css' rel='stylesheet'>
    <link href='bower_components/bootstrap-tour/build/css/bootstrap-tour.min.css' rel='stylesheet'>
    <link href='css/jquery.noty.css' rel='stylesheet'>
    <link href='css/noty_theme_default.css' rel='stylesheet'>
    <link href='css/elfinder.min.css' rel='stylesheet'>
    <link href='css/elfinder.theme.css' rel='stylesheet'>
    <link href='css/jquery.iphone.toggle.css' rel='stylesheet'>
    <link href='css/uploadify.css' rel='stylesheet'>
    <link href='css/animate.min.css' rel='stylesheet'>

    <!-- jQuery -->
    <script src="bower_components/jquery/jquery.min.js"></script>

    <!-- The HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- The fav icon -->
    <link rel="shortcut icon" href="img/favicon.ico">

</head>

<body>
    <!-- topbar starts -->
	<#include "commonPage/top.ftl">
	<!-- topbar ends -->
	<div class="ch-container">
		<div class="row">

			<!-- left menu starts -->
			<#include "commonPage/left.ftl">
			<!--/span-->
			<!-- left menu ends -->

        <noscript>
            <div class="alert alert-block col-md-12">
                <h4 class="alert-heading">Warning!</h4>

                <p>You need to have <a href="http://en.wikipedia.org/wiki/JavaScript" target="_blank">JavaScript</a>
                    enabled to use this site.</p>
            </div>
        </noscript>

        <div id="content" class="col-lg-10 col-sm-10">
            <!-- content starts -->
                <div>

    </div>

            <!--/学生基本信息显示-->
    <div class="row">
    <div class="box col-md-12">
    <div class="box-inner">
    <div class="box-header well" data-original-title="">
        <h2><i class="glyphicon glyphicon-user"></i> 添加学生</h2>


    </div>
    <div class="box-content">
	
    <table class="table table-striped table-bordered bootstrap-datatable datatable responsive">
	<form name="form" method="post" action="stu/addStu">
        <div class="form-group has-warning col-md-4">
            <label class="control-label" for="inputWarning1">姓名 </label>
            <input type="text"  class="form-control" id="stuname" name="Stu.stuname"  ><br>
            
            <label class="control-label" for="inputWarning1">性别</label><br><br>
			<select  id="stusex"  name="Stu.stusex" data-rel="chosen" style="width:100px;">
                            <option value="男">男</option>
                            <option value="女">女</option>
            </select><br><br> 
            
            <label class="control-label" for="inputWarning1">学号</label> 
            <input type="text" class="form-control" id="sno" name="Stu.sno"><br> 
            
            <label class="control-label" for="inputWarning1">专业班级</label> 
            <div class="controls">						
			<select name="major_id" id="majorSelect" data-rel="chosen" onchange="showMsg()" style="width: 90px;" data-placeholder="专业"> 
			<#list marjorList as mlist>
				<option selected="selected" value=""></option>
				<option value="${mlist.m_id!}" class="major"> ${mlist.simpleName!}</option>
				</#list>
			</select> 
			
			<select name="Stu.c_id" id="c_id" style="width: 90px;" >
				<option selected="selected" value=""></option>
			</select>
			<br><br>
		</div>
            
			<label class="control-label" for="inputWarning1" >QQ</label>
            <input type="text" class="form-control" id="qq" name="Stu.qq"><br>

            <label class="control-label" for="inputWarning1">电话</label>
            <input type="text" class="form-control" id="phone" name="Stu.phone"  ><br>

            <label class="control-label" for="inputWarning1">籍贯</label>
            <input type="text" class="form-control" id="position" name="Stu.position"  ><br>

            <label class="control-label" for="inputWarning1">政治面貌</label>
            <input type="text" class="form-control" id="face" name="Stu.face"  ><br>
            
            <label class="control-label" for="inputWarning1">家庭联系方式一</label>
            <input type="text" class="form-control" id="contact_1" name="Stu.contact_1"  ><br>
            <label class="control-label" for="inputWarning1">家庭联系方式二</label>
            <input type="text" class="form-control" id="contact_2" name="Stu.contact_2"  ><br>
            <label class="control-label" for="inputWarning1">宿舍号</label>
            <input type="text" class="form-control" id="dorm" name="Stu.dorm"  ><br>
            <label class="control-label" for="inputWarning1">高考成绩</label>
            <input type="text" class="form-control" id="highgrade" name="Stu.highgrade"  ><br>
            <label class="control-label" for="inputWarning1">是否单亲 </label>
            <input type="radio" name="Stu.single_parent" value="1" checked="checked" />否
            <input type="radio" name="Stu.single_parent" value="0" />是
            <br>
            <button type="button"  onclick="add()" class="btn btn-default" >添加</button>

            <button type="button"  onclick="self.location.href='${contextPath}/stu'" class="btn btn-default" style="margin-left:200px">返回</button>

        </div>
        </FORM>
    </table>
    
    </div>
    </div>
    </div>
    <!--/span-->

    </div><!--/row-->



    <!-- content ends -->
    </div><!--/#content.col-md-0-->
</div><!--/fluid-row-->

    <!-- Ad, you can remove it -->

    <!-- Ad ends -->

    <hr>

</div><!--/.fluid-container-->

<!-- external javascript -->

<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

<!-- library for cookie management -->
<script src="js/jquery.cookie.js"></script>
<!-- calender plugin -->
<script src='bower_components/moment/min/moment.min.js'></script>
<script src='bower_components/fullcalendar/dist/fullcalendar.min.js'></script>
<!-- data table plugin -->
<script src='js/jquery.dataTables.min.js'></script>

<!-- select or dropdown enhancer -->
<script src="bower_components/chosen/chosen.jquery.min.js"></script>
<!-- plugin for gallery image view -->
<script src="bower_components/colorbox/jquery.colorbox-min.js"></script>
<!-- notification plugin -->
<script src="js/jquery.noty.js"></script>
<!-- library for making tables responsive -->
<script src="bower_components/responsive-tables/responsive-tables.js"></script>
<!-- tour plugin -->
<script src="bower_components/bootstrap-tour/build/js/bootstrap-tour.min.js"></script>
<!-- star rating plugin -->
<script src="js/jquery.raty.min.js"></script>
<!-- for iOS style toggle switch -->
<script src="js/jquery.iphone.toggle.js"></script>
<!-- autogrowing textarea plugin -->
<script src="js/jquery.autogrow-textarea.js"></script>
<!-- multiple file upload plugin -->
<script src="js/jquery.uploadify-3.1.min.js"></script>
<!-- history.js for cross-browser state change on ajax -->
<script src="js/jquery.history.js"></script>
<!-- application script for Charisma demo -->
<script src="js/charisma.js"></script>
<script type="text/javascript">
function showMsg(obj) {
 	$.ajax({
		type : "GET",
		url : "info/getClassesWithM_id",
		data : {
			m_id : $("#majorSelect").val()
		},
		dataType : "json",
		success : function(data) {
			
			$("#c_id").empty();
			$("#c_id").append("<option selected='selected' value=''></option>");
			for(var i = 0; i < data.length; i++){
				$("#c_id").append("<option  value='"+data[i].cid+"'>"+data[i].cname+"</option>");
				}
		}
	}); 
}
function add(){
	var sno = $("#sno").val();
	var stuname = $("#stuname").val();
	var stusex = $("#stusex").val();
	var qq = $("#qq").val();
	var phone = $("#phone").val();
	var c_id =$("#c_id  option:selected").val();
	var position= $("#position").val();
	var face= $("#face").val();
	var contact_1=$("#contact_1").val();
	var contact_2=$("#contact_2").val();
	var dorm=$("#dorm").val();
	var highgrade=$("#highgrade").val();
	if(sno==''||stuname==''||stusex==''||qq==''||phone==''||c_id==''||
			position==''||face==''||contact_1==''||contact_2==''||dorm==''||highgrade==''||sno==null||stuname==null||stusex==null||
			qq==null||phone==null||c_id==null||
			position==null||face==null||contact_1==null||contact_2==null||dorm==null||highgrade==null){
		alert("信息不能为空");
	}else{
		 $.ajax({
			type:"post",
			url:"stu/judgeStudentSno",
			data: {
				sno : sno
			},
			dataType : "json",
			success : function(data){
				if(data.statu == 1){
					alert("学生已存在！");
				}else{
					form.submit();
				}
				
			}
			
		 });
	}	
	
}

</script>

</body>
</html>
